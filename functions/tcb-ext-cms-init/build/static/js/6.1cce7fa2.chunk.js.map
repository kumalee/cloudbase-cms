{"version":3,"sources":["components/MarkdownInput.js"],"names":["Vditor","props","source","record","onChange","useInput","input","value","useEffect","vditor","VditorX","after","onInit","getValue","disabled","text","html","select","onSelect","getSelection","upload","url","window","cmsEnvConfig","envId","theme","darkMode","placeholder","mode","minHeight","debugger","typewriterMode","cache","enable","id"],"mappings":"+HAAA,wGAMe,SAASA,EAAOC,GAAQ,IAC7BC,EAAwBD,EAAxBC,OAD4B,EACJD,EAAhBE,cADoB,MACX,GADW,EAGzBC,EACPC,YAASJ,GADXK,MAASF,SAELG,EAAQJ,EAAOD,GA+BrB,OA7BAM,qBAAU,WAAO,IAAD,EACRC,EAAS,IAAIC,IAAQ,SAAU,CACnCH,QACAI,MAAO,WACDV,EAAMW,QAAQX,EAAMW,OAAOH,EAAOI,YAClCZ,EAAMa,UAAUL,EAAOK,YAE7BR,MAAO,SAACS,EAAMC,GACZZ,EAASW,IAEXE,OAAQ,WACFhB,EAAMiB,UACRjB,EAAMiB,SAAST,EAAOU,eAAgBV,EAAOI,aAEjDO,OAAQ,CACNC,IAAI,KAAD,OAAOC,OAAOC,aAAaC,MAA3B,sDAELC,MAAOxB,EAAMyB,SAAW,OAAS,UACjCC,YAAW,UAAE1B,EAAM0B,mBAAR,QAAuB,4EAClCC,KAAM,KACNC,UAAW,IACXC,UAAU,EACVC,gBAAgB,EAChBC,MAAO,CACLC,QAAQ,OAGX,IAEI,yBAAKC,GAAG","file":"static/js/6.1cce7fa2.chunk.js","sourcesContent":["import React, { useEffect } from \"react\";\nimport VditorX from \"vditor\";\nimport { useInput } from \"react-admin\";\n\nimport \"vditor/dist/index.css\";\n\nexport default function Vditor(props) {\n  const { source, record = {} } = props;\n  const {\n    input: { onChange },\n  } = useInput(props);\n  const value = record[source];\n\n  useEffect(() => {\n    const vditor = new VditorX(\"editor\", {\n      value,\n      after: () => {\n        if (props.onInit) props.onInit(vditor.getValue());\n        if (props.disabled) vditor.disabled();\n      },\n      input: (text, html) => {\n        onChange(text);\n      },\n      select: () => {\n        if (props.onSelect)\n          props.onSelect(vditor.getSelection(), vditor.getValue());\n      },\n      upload: {\n        url: `//${window.cmsEnvConfig.envId}.service.tcloudbase.com/tcb-ext-cms-upload/upload`,\n      },\n      theme: props.darkMode ? \"dark\" : \"classic\",\n      placeholder: props.placeholder ?? \"欢迎使用云开发 CMS Markdown编辑器\",\n      mode: \"sv\",\n      minHeight: 600,\n      debugger: false,\n      typewriterMode: false,\n      cache: {\n        enable: false,\n      },\n    });\n  }, []);\n\n  return <div id=\"editor\" />;\n}\n"],"sourceRoot":""}