(this["webpackJsonptcb-service-admin"]=this["webpackJsonptcb-service-admin"]||[]).push([[0],{267:function(e,t,n){e.exports=n(376)},272:function(e,t,n){},273:function(e,t,n){},291:function(e,t,n){e.exports=n.p+"static/media/tcb-logo.b050342e.svg"},376:function(e,t,n){"use strict";n.r(t);var r,a,i,c=n(0),l=n.n(c),o=n(10),u=n.n(o),s=(n(272),n(273),n(7)),d=n.n(s),p=n(50),f=n(103),m=n(16),b=n(453),h=n(452),x=n(121),y=n(65),T=n.n(y),v=n(102),g=n(222),O=n.n(g),w=n(454),j=n(440),k=n(148),N=n(455),S=n(230),L=n(109),E=Object(L.a)({title:{flex:1,textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"},spacer:{flex:1}}),C=function(e){var t=E();return l.a.createElement(S.a,e,l.a.createElement("img",{className:"tcb-cms-app-logo",alt:"\u4e91\u5f00\u53d1",src:n(291)}),l.a.createElement(j.a,{variant:"subtitle1",color:"inherit",className:t.title,id:"tcbCmsAppTitle"},"CMS \u5185\u5bb9\u7ba1\u7406\u7cfb\u7edf"))},P=function(e){return l.a.createElement(N.a,Object.assign({},e,{appBar:C}),l.a.createElement(j.a,{variant:"h6",color:"inherit",id:"react-admin-title"}),e.children)},F=n(8),M=n(436),R=n(177),A=n(118),I=n(21),q=Object(L.a)({desc:{padding:"15px 20px",color:"#111"}}),D=Object(I.i)((function(e){var t=e.onMenuClick,n=e.logout,r=q(),a=Object(M.a)((function(e){return e.breakpoints.down("xs")})),i=Object(F.f)((function(e){return e.admin.ui.sidebarOpen})),o=Object(F.f)(R.d),u={};return l.a.createElement("div",null,o.map((function(e){var n,a,o=null===(n=e.options)||void 0===n?void 0:n.group,s=o&&!(o in u);return s&&(u[o]=!0),l.a.createElement(l.a.Fragment,{key:e.name},s&&l.a.createElement(l.a.Fragment,null,l.a.createElement(j.a,{variant:"body2",color:"inherit",key:o,className:r.desc},o)),l.a.createElement(A.a,{key:e.name,to:"/".concat(e.name),primaryText:(null===(a=e.options)||void 0===a?void 0:a.label)||e.name,leftIcon:Object(c.createElement)(e.icon),onClick:t,sidebarIsOpen:i}))})),a&&n)})),_=n(449),V=function(e){return function(t){return l.a.createElement(_.a,null,e||"library_books")}};function B(){return U.apply(this,arguments)}function U(){return(U=Object(m.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=2;break}return e.abrupt("return",r);case 2:return e.prev=2,e.next=5,fetch("config.json");case 5:return t=e.sent,e.next=8,t.json();case 8:r=e.sent,e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),console.log("error is",e.t0.message),r=JSON.parse(Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_TCB_CMS_CONFIG);case 15:return window.cmsEnvConfig=r,e.abrupt("return",r);case 17:case"end":return e.stop()}}),e,null,[[2,11]])})))).apply(this,arguments)}function H(){return W.apply(this,arguments)}function W(){return(W=Object(m.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=6;break}return e.next=3,B();case 3:t=e.sent,a=window.tcb.init({env:t.envId}),window.app=a;case 6:return e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var J={login:function(e){var t=this;return Object(m.a)(d.a.mark((function n(){var r,a,i,c,l,o,u;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.username,a=e.password,n.next=3,B();case 3:return i=n.sent,n.next=6,t.getAuthObj();case 6:return c=n.sent,(l=new Headers).append("Content-Type","application/json"),o={method:"POST",headers:l,body:JSON.stringify({userName:r.trim(),password:a.trim()}),redirect:"follow"},n.next=12,fetch("//".concat(i.envId,".service.tcloudbase.com/tcb-ext-cms-auth/login"),o).then((function(e){return e.json()}));case 12:if((u=n.sent).code){n.next=18;break}return localStorage.setItem("tcb-cms-role",u.data.role),n.abrupt("return",c.signInWithTicket(u.data.ticket));case 18:return n.abrupt("return",Promise.reject(u.message));case 19:case"end":return n.stop()}}),n)})))()},logout:function(){var e=this;return Object(m.a)(d.a.mark((function t(){var n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getAuthObj();case 2:return n=t.sent,t.abrupt("return",n.signOut().then(console.log));case 4:case"end":return t.stop()}}),t)})))()},checkError:function(e){var t=e.status;return 401===t||403===t?Promise.reject():Promise.resolve()},checkAuth:function(){var e=this;return Object(m.a)(d.a.mark((function t(){var n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getAuthObj();case 2:return n=t.sent,t.next=5,n.getLoginState();case 5:if(t.sent){t.next=8;break}throw new Error("\u672a\u767b\u5f55\uff0c\u8bf7\u5148\u767b\u5f55\u540e\u518d\u8fdb\u884c\u64cd\u4f5c");case 8:case"end":return t.stop()}}),t)})))()},getPermissions:function(){var e=localStorage.getItem("tcb-cms-role");return e?Promise.resolve(e):Promise.reject()},getAuthObj:function(){return Object(m.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i){e.next=5;break}return e.next=3,H();case 3:t=e.sent,i=t.auth({persistence:"local"});case 5:return e.abrupt("return",i);case 6:case"end":return e.stop()}}),e)})))()}},K=n(83),G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},t=Q(e);return{getList:X(t("getList")),getOne:X(t("getOne")),getMany:X(t("getMany")),getManyReference:X(t("getManyReference")),create:X(Y(t("create"))),update:X(Y(t("update"))),updateMany:X(Y(t("updateMany"))),delete:t("delete"),deleteMany:t("deleteMany")}},z={NO_AUTH:"\u6ca1\u6709\u5185\u5bb9\u64cd\u4f5c\u6743\u9650"},Q=function(e){return function(t){return function(){var n=Object(m.a)(d.a.mark((function n(r,a){var i,c;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,l=a,Z((function(e){return re("Object")(e)&&"local"===e.cmsDataType}),function(){var e=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.cloudId);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())(l);case 2:return a=n.sent,n.next=5,H();case 5:return i=n.sent,n.next=8,i.callFunction({name:"tcb-ext-cms-api",data:{operate:t,resource:r,params:a}});case 8:if(!(c=n.sent).result.code){n.next=13;break}return n.abrupt("return",Promise.reject(new Error(c.message||z[c.result.code]||c.result.code)));case 13:return e(t,r,c.result),n.abrupt("return",c.result);case 15:case"end":return n.stop()}var l}),n)})));return function(e,t){return n.apply(this,arguments)}}()}};function X(e){return function(){var t=Object(m.a)(d.a.mark((function t(n,r){var a,i;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e(n,r);case 2:return a=t.sent,i=Z((function(e,t){return"string"===typeof e&&/^cloud:\/\/\S+/.exec(e)&&"local"!==t.cmsDataType}),function(){var e=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,te(t);case 2:return e.t0=e.sent,e.t1=t,e.abrupt("return",{tempUrl:e.t0,cloudId:e.t1,cmsDataType:"local"});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),t.abrupt("return",i(Object(K.a)({},a)));case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}function Y(e){return function(){var t=Object(m.a)(d.a.mark((function t(n,r){var a,i;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=Z((function(e){return e&&e.rawFile instanceof File}),function(){var e=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$(t.rawFile);case 2:return e.t0=e.sent,e.abrupt("return",{cloudId:e.t0,cmsDataType:"local"});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),t.next=3,a(Object(K.a)({},r));case 3:return i=t.sent,t.abrupt("return",e(n,i));case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}function Z(e,t){return function(){var n=Object(m.a)(d.a.mark((function n(a){return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Promise.all(Object.entries(a).map(function(){var n=Object(m.a)(d.a.mark((function n(i){var c,l,o,u;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(c=Object(f.a)(i,2),l=c[0],o=c[1],!e(o,a)){n.next=8;break}return n.next=4,t(o);case 4:u=n.sent,a[l]=u,n.next=10;break;case 8:if(!Array.isArray(o)&&!re("Object")(o)){n.next=10;break}return n.abrupt("return",r(o));case 10:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()));case 2:return n.abrupt("return",a);case 3:case"end":return n.stop()}}),n)})));function r(e){return n.apply(this,arguments)}return r}()}function $(e){return ee.apply(this,arguments)}function ee(){return(ee=Object(m.a)(d.a.mark((function e(t){var n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H();case 2:return n=e.sent,e.next=5,n.uploadFile({cloudPath:"uploads/".concat(Date.now(),".").concat(t.name.split(".").slice(-1)[0]),filePath:t});case 5:return r=e.sent,e.abrupt("return",r.fileID);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function te(e){return ne.apply(this,arguments)}function ne(){return(ne=Object(m.a)(d.a.mark((function e(t){var n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H();case 2:return n=e.sent,e.next=5,n.getTempFileURL({fileList:[t]});case 5:return r=e.sent,e.abrupt("return",r.fileList[0].tempFileURL);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function re(e){return function(t){return Object.prototype.toString.call(t)==="[object "+e+"]"}}var ae,ie=[{collectionName:"tcb-ext-cms-contents",label:"\u5185\u5bb9\u8bbe\u7f6e",icon:"settings",group:"\u7ba1\u7406",description:"\u5f00\u53d1\u8005\u53ef\u4ee5\u6839\u636e\u6570\u636e\u5e93\u5b57\u6bb5\u8fdb\u884c\u5185\u5bb9\u8bbe\u7f6e\uff0c\u5e76\u81ea\u52a8\u751f\u6210\u7ba1\u7406\u754c\u9762\uff0c\u4fee\u6539\u5185\u5bb9\u8bbe\u7f6e\u540e\uff0c\u9700\u5237\u65b0\u9875\u9762\u67e5\u770b\u6700\u65b0\u7684\u7ba1\u7406\u754c\u9762",fields:[{fieldName:"label",fieldLabel:"\u5185\u5bb9\u7c7b\u578b",fieldType:"String",isRequired:!0},{fieldName:"collectionName",fieldLabel:"\u6570\u636e\u5e93\u96c6\u5408\u540d",fieldType:"String",isRequired:!0,helpText:"\u5185\u5bb9\u5bf9\u5e94\u7684\u6570\u636e\u5e93\u96c6\u5408\u540d\uff0c\u53ef\u586b\u5199\u73b0\u6709\u96c6\u5408\u540d\uff0c\u5982\u96c6\u5408\u4e0d\u5b58\u5728\u5219\u4f1a\u81ea\u52a8\u521b\u5efa"},{fieldName:"icon",fieldLabel:"\u56fe\u6807",fieldType:"Icon"},{fieldName:"order",fieldLabel:"\u6392\u5e8f\uff08\u503c\u8d8a\u5927\u8d8a\u9760\u524d\uff09",fieldType:"Number"},{fieldName:"description",fieldLabel:"\u63cf\u8ff0\u4fe1\u606f",fieldType:"String",isRequired:!1,helpText:"\u4f1a\u5c55\u793a\u5728\u5bf9\u5e94\u5185\u5bb9\u7684\u7ba1\u7406\u9875\u9762\u9876\u90e8"},Object(K.a)({fieldName:ae?"childFields":"fields",fieldLabel:ae?"\u5b50\u5b57\u6bb5\u5217\u8868\uff08\u53ea\u6709\u6570\u7ec4\u7c7b\u578b\u65f6\u624d\u9700\u8981\u586b\u5199\uff09":"\u5b57\u6bb5\u5217\u8868",fieldType:"Array",isRequired:!0,defaultValue:ae?[]:[{fieldName:"name",fieldLabel:"\u540d\u79f0",fieldType:"String"},{fieldName:"order",fieldLabel:"\u6392\u5e8f",helpText:"\u503c\u8d8a\u5927\u5728 CMS \u5217\u8868\u4e2d\u8d8a\u9760\u524d",fieldType:"Number"},{fieldName:"createTime",fieldLabel:"\u521b\u5efa\u65f6\u95f4",fieldType:"DateTime",helpText:"\u7559\u7a7a\u65f6\u4f1a\u5728\u670d\u52a1\u7aef\u81ea\u52a8\u5199\u5165\u521b\u5efa\u65f6\u95f4"},{fieldName:"updateTime",fieldLabel:"\u4fee\u6539\u65f6\u95f4",fieldType:"DateTime",helpText:"\u7559\u7a7a\u65f6\u4f1a\u5728\u670d\u52a1\u7aef\u81ea\u52a8\u5199\u5165\u4fee\u6539\u65f6\u95f4"}]},ae?{expectField:"fieldType",expectValue:"Array"}:{},{childFields:[{fieldName:"fieldLabel",fieldLabel:"\u5b57\u6bb5\u540d\u79f0",helpText:"\u5b57\u6bb5\u4e2d\u6587\u663e\u793a\u540d\u79f0",fieldType:"String",isRequired:!0},{fieldName:"fieldName",fieldLabel:"\u6570\u636e\u5e93\u5b57\u6bb5\u540d",fieldType:"String",helpText:"\u8be5\u5b57\u6bb5\u5728\u6570\u636e\u5e93\u4e2d\u4fdd\u5b58\u7684\u540d\u79f0",isRequired:!0},{fieldName:"fieldType",fieldLabel:"\u5b57\u6bb5\u7c7b\u578b",fieldType:"Select",isRequired:!0,options:[].concat(Object(p.a)([{id:"String",name:"\u5b57\u7b26\u4e32"},{id:"DateTime",name:"\u65f6\u95f4"},{id:"Boolean",name:"\u5e03\u5c14\u503c"},{id:"Number",name:"\u6570\u5b57"},{id:"Image",name:"\u56fe\u7247"},{id:"File",name:"\u6587\u4ef6"},{id:"Email",name:"\u90ae\u7bb1\u5730\u5740"},{id:"Tel",name:"\u7535\u8bdd\u53f7\u7801"},{id:"Url",name:"\u7f51\u5740"},{id:"RichText",name:"\u5bcc\u6587\u672c"},{id:"Markdown",name:"Markdown"},{id:"Array",name:"\u6570\u7ec4"}]),Object(p.a)(ae?[]:[{id:"Connect",name:"\u5173\u8054"}].concat(Object(p.a)([]))))},{fieldName:"stringMinLength",fieldLabel:"\u6700\u5c0f\u957f\u5ea6",fieldType:"Number",hidden:!0,expectField:"fieldType",expectValue:"String"},{fieldName:"stringMaxLength",fieldLabel:"\u6700\u5927\u957f\u5ea6",fieldType:"Number",hidden:!0,expectField:"fieldType",expectValue:"String"}].concat(Object(p.a)(ae?[]:[{fieldName:"connectResource",fieldLabel:"\u5173\u8054\u7684\u5185\u5bb9",fieldType:"Connect",connectResource:"tcb-ext-cms-contents",connectField:"label",helpText:"\u8fd9\u4e2a\u5b57\u6bb5\u5f15\u7528\u4e86\u4e00\u4e2a\u6216\u8005\u591a\u4e2a\u5173\u8054\u5185\u5bb9",expectField:"fieldType",expectValue:"Connect"},{fieldName:"connectField",fieldLabel:"\u663e\u793a\u5173\u8054\u7684\u5185\u5bb9\u4e2d\u7684\u54ea\u4e2a\u5b57\u6bb5",fieldType:"String",hidden:!0,helpText:"\u5728\u7f16\u8f91\u65f6\uff0c\u4f1a\u663e\u793a\u5f15\u7528\u7684\u5173\u8054\u5185\u5bb9\u7684\u67d0\u4e2a\u5b57\u6bb5",expectField:"fieldType",expectValue:"Connect"},{fieldName:"connectMany",fieldLabel:"\u662f\u5426\u5173\u8054\u591a\u9879",fieldType:"Boolean",hidden:!0,helpText:"\u662f\u5426\u5f15\u7528\u591a\u4e2a",expectField:"fieldType",expectValue:"Connect"}]),[{fieldName:"defaultValue",fieldLabel:"\u9ed8\u8ba4\u503c",fieldType:"Text",hidden:!0},{fieldName:"helpText",fieldLabel:"\u5b57\u6bb5\u8bf4\u660e",fieldType:"Text",helpText:"\u8bf4\u660e\u6587\u5b57\u4f1a\u5c55\u793a\u5728\u8f93\u5165\u6846\u4e0b\u65b9",hidden:!0},{fieldName:"isRequired",fieldLabel:"\u662f\u5426\u5fc5\u586b",fieldType:"Boolean",hidden:!0},{fieldName:"hidden",fieldLabel:"\u662f\u5426\u9690\u85cf\u8be5\u5217",fieldType:"Boolean",helpText:"\u5728PC\u7aef\u8868\u683c\u89c6\u56fe\u662f\u5426\u9690\u85cf\u8be5\u5217",hidden:!0,isRequired:!1,defaultValue:!1}],Object(p.a)([]))})]},{collectionName:"tcb-ext-cms-webhooks",label:"Webhook",description:"\u5b9e\u9a8c\u5ba4\u529f\u80fd\uff1aWebhook \u53ef\u4ee5\u7528\u4e8e\u5728\u8fd0\u8425\u4eba\u5458\u4fee\u6539\u5185\u5bb9\u6570\u636e\u540e\uff0c\u81ea\u52a8\u56de\u8c03\u5916\u90e8\u7cfb\u7edf\uff0c\u6bd4\u5982\u81ea\u52a8\u6784\u5efa\u9759\u6001\u7f51\u7ad9\u3001\u53d1\u9001\u901a\u77e5\u7b49",icon:"all_inclusive",group:"\u7ba1\u7406",fields:[{fieldName:"name",fieldLabel:"Webhook \u540d\u79f0",fieldType:"String",isRequired:!0},{fieldName:"method",fieldLabel:"HTTP method",fieldType:"Select",isRequired:!0,options:[{id:"POST",name:"POST"},{id:"GET",name:"GET"},{id:"PUT",name:"PUT"},{id:"PATCH",name:"PATCH"},{id:"DELETE",name:"DELETE"}],defaultValue:"POST"},{fieldName:"url",fieldLabel:"Webhook\u5730\u5740",fieldType:"Url",isRequired:!0},{fieldName:"triggerType",fieldLabel:"\u89e6\u53d1\u7c7b\u578b",fieldType:"Select",isRequired:!0,defaultValue:"all",options:[{id:"all",name:"\u6240\u6709\u5185\u5bb9\u4e8b\u4ef6\u90fd\u89e6\u53d1"},{id:"filter",name:"\u53ea\u6709\u6307\u5b9a\u5185\u5bb9\u4e8b\u4ef6\u624d\u89e6\u53d1"}]},{fieldName:"event",fieldLabel:"\u89e6\u53d1\u7c7b\u578b",fieldType:"SelectArray",expectField:"triggerType",expectValue:"filter",defaultValue:["create","update","updateMany","delete","deleteMany"],options:[{id:"create",name:"create"},{id:"update",name:"update"},{id:"updateMany",name:"updateMany"},{id:"delete",name:"delete"},{id:"deleteMany",name:"deleteMany"}]},{fieldName:"collections",fieldLabel:"\u76d1\u542c\u6307\u5b9a\u5185\u5bb9",fieldType:"Connect",connectResource:"tcb-ext-cms-contents",connectMany:!0,connectField:"label",helpText:"\u4ec5\u5728\u6307\u5b9a\u96c6\u5408\u53d8\u5316\u65f6\u89e6\u53d1"},{fieldName:"headers",fieldLabel:"HTTP Headers",fieldType:"Array",childFields:[{fieldName:"key",fieldLabel:"Key",fieldType:"String",isRequired:!0},{fieldName:"value",fieldLabel:"Value",fieldType:"String",isRequired:!0}]}]}],ce=Object(v.a)({palette:{secondary:O.a},typography:{fontFamily:["-apple-system","BlinkMacSystemFont",'"Segoe UI"',"Arial","sans-serif"].join(",")}});T.a.ra.page.empty="\u8fd8\u6ca1\u6709\u5185\u5bb9",T.a.ra.page.invite="\u5feb\u6765\u70b9\u51fb \u201c\u65b0\u5efa\u201d \u6765\u521b\u5efa\u7b2c\u4e00\u6761\u5185\u5bb9\u5427",T.a.ra.action.expand="\u5c55\u5f00",T.a.ra.action.close="\u5173\u95ed",T.a.ra.action.confirm="\u786e\u5b9a";var le=Object(x.a)((function(){return T.a}),"cn"),oe=function(){var e=Object(k.useSnackbar)().enqueueSnackbar,t=G((function(t,n){"tcb-ext-cms-contents"===n&&["create","update","delete"].includes(t)&&(e("\u5185\u5bb9\u5efa\u6a21\u8bbe\u7f6e\u5df2\u66f4\u65b0\uff0c\u5c06\u4f1a\u81ea\u52a8\u5237\u65b0\u9875\u9762\u66f4\u65b0\u6700\u65b0\u7ba1\u7406\u754c\u9762",{variant:"info",anchorOrigin:{vertical:"top",horizontal:"center"}}),setTimeout((function(){return window.location.reload()}),2500))}));return l.a.createElement(b.a,{title:"\u4e91\u5f00\u53d1CMS\u5185\u5bb9\u7ba1\u7406\u7cfb\u7edf\u6269\u5c55",i18nProvider:le,authProvider:J,dataProvider:t,theme:ce,layout:P,menu:D},se)},ue=function(){return l.a.createElement(w.a,{textAlign:"center",m:1},l.a.createElement(j.a,{variant:"h5",paragraph:!0},"\u5185\u5bb9\u8bbe\u7f6e\u4e3a\u7a7a\uff0c\u8bf7\u8054\u7cfb\u4f60\u7684 CMS \u7cfb\u7edf\u7ba1\u7406\u5458\u8fdb\u884c\u5185\u5bb9\u914d\u7f6e"))},se=function(){var e=Object(m.a)(d.a.mark((function e(t){var r,a,i,c,o;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,J.checkAuth();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),window.location.hash="#/login";case 8:return e.next=10,Promise.all([G().getList("tcb-ext-cms-contents",{filter:{},pagination:{page:1,perPage:100},sort:{field:"order",order:"DESC"}}),Promise.all([n.e(2),n.e(7)]).then(n.bind(null,1113))]);case 10:if(r=e.sent,a=Object(f.a)(r,2),i=a[0],c=a[1].RescourceComponentsFactory,window.cmsConfig={defaultConfig:ie,resouceConfig:i.data,resouceIndexById:i.data.reduce((function(e,t){return e[t._id]=t,e}),{}),resouceIndexByCollectionName:i.data.reduce((function(e,t){return e[t.collectionName]=t,e}),{})},(o=[].concat(Object(p.a)("administrator"===t?ie:[]),Object(p.a)(i.data.filter((function(e){return e.collectionName&&e.label}))))).length){e.next=18;break}return e.abrupt("return",[l.a.createElement(ue,null)]);case 18:return e.abrupt("return",o.map((function(e){var t=c(e),n=t.ListComponent,r=t.EditComponent,a=t.CreateComponent,i=t.ShowComponent,o=e.collectionName,u=e.label,s=e.icon,d=e.group,p=void 0===d?"\u8fd0\u8425":d;return l.a.createElement(h.a,{name:o,options:{label:u,group:p},show:i,list:n,edit:r,create:a,icon:V(s)})})));case 19:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}();function de(){return l.a.createElement(k.SnackbarProvider,{maxSnack:3},l.a.createElement(oe,null))}u.a.render(l.a.createElement(de,null),document.getElementById("root"))}},[[267,1,3]]]);
//# sourceMappingURL=main.bd790fb7.chunk.js.map